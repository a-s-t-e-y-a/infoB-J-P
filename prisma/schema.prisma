// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User {
  id          Int    @id @default(autoincrement())
  email       String @unique
  name        String
  phoneNumber String
  dob         String
  village     String
  hash        String
}

//  mundal - block -> panchayat/ppoling booth [one to many with block ] - > prbhari mtlb incharge -> sankjyok coordinator  -> only one i
model Mundal {
  id           Int            @id @default(autoincrement())
  name         String
  // adhyaksha     Int            @default(0)
  // upaadhyaksha  Int            @default(0)
  // mahamantri    Int            @default(0)
  // mantri        Int            @default(0)
  // koshadhyaksha Int            @default(0)
  karyakarta   karykarta[]
  Sector       Sector?
}

model Sector {
  id           Int            @id @default(autoincrement())
  name         String
  // shaktikendraSanyojak Int
  // shaktikendraprabhari Int
  mundal       Mundal?        @relation(fields: [mundalId], references: [id])
  mundalId     Int?           @unique
  karykarta            karykarta[]
  poolingBooth poolingBooth?
}

model poolingBooth {
  id             Int         @id @default(autoincrement())
  name           String
  // adhyakshaBooth String
  sector         Sector?      @relation(fields: [sectorId], references: [id])
  sectorId       Int? @unique
  karykarta      karykarta[]
}

model karykarta {
  id             Int           @id @default(autoincrement())
  name           String
  address        String
  mobileNumber   String
  dob            String
  religion       String
  gender         String
  previousParty  String?       @default("None")
  mundal         Mundal?       @relation(fields: [mundalId], references: [id])
  mundalId       Int?
  sector         Sector?       @relation(fields: [sectorId], references: [id])
  sectorId       Int?
  poolingBooth   poolingBooth? @relation(fields: [poolingBoothid], references: [id])
  poolingBoothid Int?
  role           Role          @default(karyakarta)
}

enum Role {
  karyakarta
  adhyaksha
  koshadhyaksha
  mahamantri
  mantri
  upaadhyaksha
  adhyakshaBooth
  shaktikendraSanyojak
  shaktikendraprabhari
}

// model 

// name , addersss,mundal , polling booth ,sector , mobileNumber , dob ,religion ,gender ,previousParty , 
